---
title: "01_cleaning_browse_data"
author: "anne"
date: "31 oktober 2018"
output: word_document
editor_options: 
  chunk_output_type: inline
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r}
load("processdata/browse.rda")
load("processdata/browse_sub.rda")
```


```{r}
str(browse)
head(browse)

```


```{r}
browse_sub  <- browse[,c(1,4:5,7:10,12:14,27:29, 31:45,49,51,53,59,62:68,70,72:83,85:88,90:91,99:107)]
write.csv(browse_sub, file = "browse_sub.csv")

browse_sub <- read.csv2("C:/Users/anne.mehlhoop/OneDrive - NINA/vei-veggi-vilt/Paper_1_browsing/analysis/rawdata/browse_sub.csv", sep = ",")
save(browse_sub, file = "browse_sub.rda")


load("processdata/browse_sub.rda")

```


```{r}
str(browse_sub)
head(browse_sub)

```


##### Explore NAs
```{r}
nrow((browse_sub))
nrow(na.omit(browse_sub))
  
anyNA(browse_sub$bros10)
anyNA(browse_sub$bros9)
anyNA(browse_sub$birch10)
anyNA(browse_sub$bdec9)
anyNA(browse_sub$bpine10)
anyNA(browse_sub$bpine9)
anyNA(browse_sub$roadtype1)
anyNA(browse_sub$roadtype2)
anyNA(browse_sub$roadtype3)
anyNA(browse_sub$roadtype3)


mean(is.na(browse_sub$bros10))
mean(is.na(browse_sub$bros9))
sum(is.na(browse_sub$bros10))
sum(is.na(browse_sub$bros9))

sum(is.na(browse_sub$bros10[is.na(browse_sub$bros10) & browse_sub$year > 2010]))

```

```{r}

browse_sub$bros9 <- as.numeric(as.character(browse_sub$bros9))
browse_sub$bdec9 <- as.numeric(as.character(browse_sub$bdec9))
browse_sub$bpine9 <- as.numeric(as.character(browse_sub$bpine9))

# browse_sub9$bros9 <- as.numeric(as.character(browse_sub9$bros9))
# browse_sub9$bdec9 <- as.numeric(as.character(browse_sub9$bdec9))
# browse_sub9$bpine9 <- as.numeric(as.character(browse_sub9$bpine9))

browse_sub$bros10 <- as.numeric(as.character(browse_sub$bros10))
browse_sub$bbirch10 <- as.numeric(as.character(browse_sub$bbirch10))
browse_sub$bpine10 <- as.numeric(as.character(browse_sub$bpine10))

browse_sub$ros.ha9 <- as.numeric(as.character(browse_sub$ros.ha9))
browse_sub$dec.ha9 <- as.numeric(as.character(browse_sub$dec.ha9))
browse_sub$pine.ha9 <- as.numeric(as.character(browse_sub$pine.ha9))

browse_sub$ros.ha10 <- as.numeric(as.character(browse_sub$ros.ha10))
browse_sub$birch.ha10 <- as.numeric(as.character(browse_sub$birch.ha10))
browse_sub$pine.ha10 <- as.numeric(as.character(browse_sub$pine.ha10))
browse_sub$dec.ha10 <- as.numeric(as.character(browse_sub$dec.ha10))

browse_sub$bbcover <- as.numeric(as.character(browse_sub$bbcover))

```


```{r}
levels(browse_sub$roadtype1)
levels(browse_sub$roadtype2)
levels(browse_sub$roadtype3)
levels(browse_sub$skogkategori)
levels(browse_sub$edge)
```

```{r}
table(browse_sub$roadtype1)
table(browse_sub$roadtype2)
table(browse_sub$roadtype3)

```





```{r}
ggplot(data = browse_sub, aes(roadtype1)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse_sub, aes(roadtype2)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse_sub, aes(roadtype3)) +
  geom_bar()+
  theme_classic()
```


```{r}
browse_sub$takst <- browse$takst
```



```{r}
browse_sub910 <- split(browse_sub, browse_sub$takst)

browse_sub9 <- browse_sub910[['9']]
browse_sub10 <- browse_sub910[['10']]

save(browse_sub9, file = "browse_sub9.rda")
save(browse_sub10, file = "browse_sub10.rda")

```









