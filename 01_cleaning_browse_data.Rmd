---
title: "01_cleaning_browse_data"
author: "anne"
date: "31 oktober 2018"
output: word_document
editor_options: 
  chunk_output_type: inline
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```



```{r}
load("processdata/browse.rda")
load("processdata/browse_sub.rda")
```

## Cleaning data
```{r}
class(browse)
str(browse)
head(browse, n = 3)
names(browse)

str(browse_sub)
head(browse_sub, n = 3)
names(browse-sub)

```

Create a subset of browse with less variables
```{r}
browse_sub  <- browse[,c(1:5,7:9,15:24,27:45,51,59,61:67,69,74,76:83,85,87:90,92:97,99:105,108:122)]
head(browse_sub, n = 3)

save(browse_sub, file = "browse_sub.rda")


load("processdata/browse_sub.rda")
head(browse_sub)
names(browse_sub)
```



##### change column names, structure (numeric, integer, factor), and level names for factors
```{r}
# new column


# col. names

# colnames(fdata1)[colnames(fdata1)=="ï..ID"] <- "ID"


# structure 
browse_sub$FYLNR <- as.integer(browse_sub$FYLNR)
browse_sub$KOMNR <- as.integer(browse_sub$KOMNR)
browse_sub$elgbROSprs10 <- as.numeric(browse_sub$elgbROSprs10)
browse_sub$elgbFURUprs10 <- as.numeric(browse_sub$elgbFURUprs10)
browse_sub$elgbBJORKprs10 <- as.numeric(browse_sub$elgbBJORKprs10)
browse_sub$ROS_0_PRHA <- as.integer(browse_sub$ROS_0_PRHA)
browse_sub$ROS_0_25_PRHA <- as.integer(browse_sub$ROS_0_25_PRHA)
browse_sub$ROS_25_49_PRHA <- as.integer(browse_sub$ROS_25_49_PRHA)
browse_sub$Bjork_0_PRHA <- as.integer(browse_sub$Bjork_0_PRHA)
browse_sub$Bjork_0_25_PRHA <- as.integer(browse_sub$Bjork_0_25_PRHA)
browse_sub$Bjork_25_49_PRHA <- as.integer(browse_sub$Bjork_25_49_PRHA)
browse_sub$elgFURUha10 <- as.numeric(browse_sub$elgFURUha10)
browse_sub$elgROSha10 <- as.numeric(browse_sub$elgROSha10)
browse_sub$elgBJORKha10 <- as.numeric(browse_sub$elgBJORKha10)
browse_sub$elgLAUVha10 <- as.numeric(browse_sub$elgLAUVha10)
browse_sub$treartgruppe <- as.factor(browse_sub$treartgruppe)
browse_sub$skogkategori <- as.factor(browse_sub$skogkategori)
browse_sub$kant <- as.factor(browse_sub$kant)
browse_sub$region <- as.factor(browse_sub$region)
browse_sub$landsdel <- as.factor(browse_sub$landsdel)
browse_sub$tretetthet0 <- as.numeric(browse_sub$tretetthet0)
browse_sub$tretetthet025 <- as.numeric(browse_sub$tretetthet025)
browse_sub$tretetthet2549 <- as.numeric(browse_sub$tretetthet2549)
browse_sub$tretetthetpluss50 <- as.numeric(browse_sub$tretetthetpluss50)
browse_sub$tretetthetminus25 <- as.numeric(browse_sub$tretetthetminus25)

```



## Subsetting

Subset of "browse_sub" (several) on 9th and 10th takst
```{r}
browse_910 <- split(browse_sub, browse_sub$takst)

browse_9 <- browse_910[['9']]
browse_10 <- browse_910[['10']]


save(browse_9, file = "browse_9.rda")
save(browse_10, file = "browse_10.rda")


browse_9 <- browse_9[,c(1:8,10:18,26:28,32:39,41:46,48:52,58:61,68:74,79:82,89)]

browse9bro <- browse_9[,c(1:8, 28, 35, 40:55)] # for browsing pressure response
browse9tree <- browse_9[,c(1:8, 10:12, 28, 32, 35:36, 40:54)] # for tree density/ number response

# browse_9$elgROSprs9 <- NULL
# browse_9$elgLAUVprs9 <- NULL
# browse_9$elgFURUprs9 <- NULL


```

Creating subsets for different data
```{r}

browse9bro_disthus <- browse9bro[which(browse9bro$distvei1 < 1501 & browse9bro$disthus > 499), ] # longest distance to any road (that is further than 500m from a house) 1500m

browse9bro_dist <- browse9bro[browse9bro$distvei1 < 1501, ] # longest distance to any public road 1500m


# 
# browse2000 <- browse_sub[browse_sub$disthouse < 2001, ] # longest distance to house 2000m
# browse1500 <- browse_sub[browse_sub$distroad500 < 1501, ] # longest distance to any road (that is further than 500m from a house) 1500m
# browse1500pub <- browse_sub[browse_sub$distpubroad500 < 1501, ] # longest distance to public roads (that are further than 500m from a house) 1500m
# 
# browseros <- browse2000[browse2000$treegroup=="raw", ]
# browserosdistroad <- browse1500[browse1500$treegroup=="raw", ]
# browserosdistpubroad <- browse1500pub[browse1500pub$treegroup=="raw", ]
# 
# 
# 
# browse2000 <- browse_sub[browse_sub$disthouse < 2001, ] # longest distance to house 2000m
# browse1500 <- browse_sub[browse_sub$distroad500 < 1501, ] # longest distance to any road (that is further than 500m from a house) 1500m
# # browse1500pub <- browse_sub[browse_sub$distpubroad500 < 1501, ] # longest distance to public roads (that are further than 500m from a house) 1500m
# 
# browseroad1500 <- browse_sub[browse_sub$distroad1 < 1501, ]
# broad1500house500 <- browse_sub[which(browse_sub$distroad1 < 1501 & browse_sub$disthouse > 499), ]
# 
# browse9_dist <- browse_9[which(browse_9$distvei1 < 1501 & browse_9$disthus > 499), ] # longest distance to any road (that is further than 500m from a house) 1500m
# browse10_dist <- browse_10[which(browse_10$distvei1 < 1501 & browse_10$disthus > 499), ] # longest distance to any road (that is further than 500m from a house) 1500m
# 
# browse9_dist2 <- browse_9[which(browse_9$distvei1 < 1501 & browse_9$disthus > 499 & browse_9$elgbROSprs9 < 101), ] # longest distance to any road (that is further than 500m from a house) 1500m and browsingpressure is under 101%
# 
# # browseros <- browse2000[browse2000$treegroup=="raw", ]
# # browserosdistroad <- browse1500[browse1500$treegroup=="raw", ]
# # browserosdistpubroad <- browse1500pub[browse1500pub$treegroup=="raw", ]

names(browseroad1500)
head(broad1500house500)

save(browseroad1500, file = "browseroad1500.rda")

```



## For browse_9

##### Explore NAs 
```{r}

nrow(browse_9)
nrow(na.omit(browse_9))

head(browse_9, n = 10)
tail(browse_9, n = 10)
# unique(unlist(lapply(browse_9, function (x) which(is.na(x)))))
# fdata1[102, ]

browse_9$distvei1[is.na(browse_9$distvei1)] <- 10000
# browse_9$distvei2[is.na(browse_9$distvei2)] <- 10000
# browse_9$distvei3[is.na(browse_9$distvei3)] <- 10000

browse_9 <- na.omit(browse_9)

save(browse_9, file = "browse_9.rda")
load("processdata/browse_9.rda")

```

##### Data structure -> factor levels
```{r}

ggplot(data = browse_9, aes(landsdel)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse_9, aes(skogkategori)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse_9, aes(kant)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse_9, aes(treartgruppe)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse_9, aes(hohkatb)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse_9, aes(region)) +
  geom_bar()+
  theme_classic()

```

```{r}

browse_9$beitetrykkr <- as.integer(round(browse_9$beitetrykk))
browse_9$bt100 <- browse_9$beitetrykkr/100
```

```{r}
# browse_9$landsdel <- as.factor(browse_9$landsdel)
# browse_9$hohkatb <- as.factor(browse_9$hohkatb)
# browse_9$landsdel <- factor(browse_9$landsdel, levels = c("Sørlandet", "Østlandet-Øst", "Midt-Norge", "Nord-Norge", "Vestlandet", "Østlandet-vest"))
browse_9$skogkategori <- factor(browse_9$skogkategori, levels = c("Lavproduktiv_eldreskog", "Høyproduktiv_eldreskog", "Høyproduktiv_ungskog",  "Lavproduktiv_ungskog", "Uproduktiv_skog"))
browse_9$kant <- factor(browse_9$kant, levels = c("kant >20m", "kant <10m", "kant 10-20m", "mangler kant")) 
browse_9$treartgruppe <- factor(browse_9$treartgruppe, levels = c("LAUV", "BJORK", "FURU", "ROS"))
# browse_9$hohkatb <- factor(browse_9$hohkatb, levels = c("100", "0", "200", "300", "400", "500", "600", "700", "800"))
browse_9$region <- factor(browse_9$region, levels = c("Agder", "Buskerud", "Hordaland", "Hedmark", "More og Romsdal", "Nord-Trondelag", "Nordland", "Oppland", "Ostfold-Akershus", "Rogaland", "Sogn og Fjordane", "Sor-Trondelag", "Troms", "Vestfold-Telemark"))

```

```{r}
save(browse_9, file = "browse_9.rda")
load("processdata/browse_9.rda")
```


##### Subset
```{r}

browse_9$disthus_cut210 <- ifelse(browse_9$disthus >= 210, 210, browse_9$disthus)

browse_9_dist <- browse_9[browse_9$distvei1 > 200, ] # longest distance to any public road 1500m
head(browse_9_dist)
save(browse_9_dist, file = "browse_9_dist.rda")

browse_9_distbin <- browse_9[browse_9$disthus > 200, ] 
browse_9_distbeta <- browse_9[browse_9$disthus > 210, ] 
# head(browse_9_dist)
save(browse_9_distbin, file = "browse_9_distbin.rda")
save(browse_9_distbeta, file = "browse_9_distbeta.rda")

```





## For browse9bro

##### Explore NAs 
```{r}

nrow(browse9bro)
nrow(na.omit(browse9bro))

head(browse9bro, n = 10)
tail(browse9bro, n = 10)
# unique(unlist(lapply(browse9bro, function (x) which(is.na(x)))))
# fdata1[102, ]

# browse9bro$distvei1[is.na(browse9bro$distvei1)] <- 10000
# browse9bro$distvei2[is.na(browse9bro$distvei2)] <- 10000
# browse9bro$distvei3[is.na(browse9bro$distvei3)] <- 10000

browse9bro <- na.omit(browse9bro)

save(browse9bro, file = "browse9bro.rda")
load("browse9bro.rda")

```

##### Data structure -> factor levels
```{r}

ggplot(data = browse9bro, aes(landsdel)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro, aes(skogkategori)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro, aes(kant)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro, aes(treartgruppe)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro, aes(hohkatb)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro, aes(region)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro, aes(vegetasjon)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro, aes(veitype1)) +
  geom_bar()+
  theme_classic()

```



```{r}
browse9bro$beitetrykkr <- round(browse9bro$beitetrykk)
```

```{r}
browse9bro$landsdel <- as.factor(browse9bro$landsdel)
browse9bro$hohkatb <- as.factor(browse9bro$hohkatb)
browse9bro$landsdel <- factor(browse9bro$landsdel, levels = c("Vestlandet", "Sørlandet", "Østlandet-Øst", "Midt-Norge", "Nord-Norge", "Østlandet-vest"))
browse9bro$skogkategori <- factor(browse9bro$skogkategori, levels = c("Lavproduktiv_eldreskog", "Høyproduktiv_eldreskog", "Høyproduktiv_ungskog",  "Lavproduktiv_ungskog", "Uproduktiv_skog"))
browse9bro$kant <- factor(browse9bro$kant, levels = c("kant >20m", "kant <10m", "kant 10-20m", "mangler kant")) 
browse9bro$treartgruppe <- factor(browse9bro$treartgruppe, levels = c("LAUV", "BJORK", "FURU", "ROS"))
browse9bro$hohkatb <- factor(browse9bro$hohkatb, levels = c("100", "0", "200", "300", "400", "500", "600", "700", "800"))
browse9bro$region <- factor(browse9bro$region, levels = c("Agder", "Buskerud", "Hordaland", "Hedmark", "More og Romsdal", "Nord-Trondelag", "Nordland", "Oppland", "Ostfold-Akershus", "Rogaland", "Sogn og Fjordane", "Sor-Trondelag", "Troms", "Vestfold-Telemark"))
browse9bro$vegetasjon <- as.factor(browse9bro$vegetasjon)
browse9bro$vegetasjon <- factor(browse9bro$vegetasjon, levels = c("Blaabaerskog", "Alm-lindeskog", "Baerlyngskog", "Berg-grus",  "Blokkebaerskog", "Flommarkskog", "Graaorskog", "Hagemarkskog", "Hogstaudeskog", "Kystlynghei", "Laagurtskog", "Lavskog", "Myr-myrskog", "Or-askeskog", "Smaabregneskog", "Storbregneskog", "Viersumpskog"))
browse9bro$veitype1 <- as.factor(browse9bro$veitype1)
browse9bro$veitype1 <- factor(browse9bro$veitype1, levels = c("fylkesveg", "europaogriksveg", "kommuneveg"))
```

```{r}
save(browse9bro, file = "browse9bro.rda")
```




# For browse9bro_dist

##### Data structure -> factor levels
```{r}

ggplot(data = browse9bro_dist, aes(landsdel)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro_dist, aes(skogkategori)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro_dist, aes(kant)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro_dist, aes(treartgruppe)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro_dist, aes(hohkatb)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro_dist, aes(region)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro_dist, aes(vegetasjon)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro_dist, aes(veitype1)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9bro_dist, aes(helling)) +
  geom_bar()+
  theme_classic()

```

```{r}
browse9bro_dist$landsdel <- as.factor(browse9bro_dist$landsdel)
browse9bro_dist$hohkatb <- as.factor(browse9bro_dist$hohkatb)
browse9bro_dist$landsdel <- factor(browse9bro_dist$landsdel, levels = c("Vestlandet", "Sørlandet", "Østlandet-Øst", "Midt-Norge", "Nord-Norge", "Østlandet-vest"))
browse9bro_dist$skogkategori <- factor(browse9bro_dist$skogkategori, levels = c("Lavproduktiv_eldreskog", "Høyproduktiv_eldreskog", "Høyproduktiv_ungskog",  "Lavproduktiv_ungskog", "Uproduktiv_skog"))
browse9bro_dist$kant <- factor(browse9bro_dist$kant, levels = c("kant >20m", "kant <10m", "kant 10-20m", "mangler kant")) 
browse9bro_dist$treartgruppe <- factor(browse9bro_dist$treartgruppe, levels = c("LAUV", "BJORK", "FURU", "ROS"))
browse9bro_dist$hohkatb <- factor(browse9bro_dist$hohkatb, levels = c("100", "0", "200", "300", "400", "500", "600", "700", "800"))
browse9bro_dist$region <- factor(browse9bro_dist$region, levels = c("Agder", "Buskerud", "Hordaland", "Hedmark", "More og Romsdal", "Nord-Trondelag", "Nordland", "Oppland", "Ostfold-Akershus", "Rogaland", "Sogn og Fjordane", "Sor-Trondelag", "Troms", "Vestfold-Telemark"))
browse9bro_dist$vegetasjon <- as.factor(browse9bro_dist$vegetasjon)
browse9bro_dist$vegetasjon <- factor(browse9bro_dist$vegetasjon, levels = c("Blaabaerskog", "Alm-lindeskog", "Baerlyngskog", "Berg-grus",  "Blokkebaerskog", "Flommarkskog", "Graaorskog", "Hagemarkskog", "Hogstaudeskog", "Kystlynghei", "Laagurtskog", "Lavskog", "Myr-myrskog", "Or-askeskog", "Smaabregneskog", "Storbregneskog", "Viersumpskog"))
browse9bro_dist$veitype1 <- as.factor(browse9bro_dist$veitype1)
browse9bro_dist$veitype1 <- factor(browse9bro_dist$veitype1, levels = c("fylkesveg", "europaogriksveg", "kommuneveg"))
browse9bro_dist$helling <- as.factor(browse9bro_dist$helling)
```

```{r}
save(browse9bro_dist, file = "browse9bro_dist.rda")
```


For binary logistic regression
```{r}
browse9bro_dist$nobro <- 100-browse9bro_dist$beitetrykkr
browse9bro_dist$nobro <- as.integer(browse9bro_dist$nobro)
browse9bro_dist$beitetrykkr <- as.integer(browse9bro_dist$beitetrykkr)
```


For beta regression
```{r}
browse9bro_dist$bt100 <- browse9bro_dist$beitetrykkr/100

browse9bro_disthus$bt100 <- browse9bro_disthus$beitetrykk/100



browse9bro_dist$bt100[browse9bro_dist$bt100 == 0.00] <- 0.01   # ---- use this to run a normal beta regression, which cannot handle values of 0.0

str(browse9bro_dist$bt100)


```


For binomial
```{r}
browse9bro_dist$btbinary <- browse9bro_dist$beitetrykkr

browse9bro_dist$btbinary[browse9bro_dist$btbinary > 0] <- 1

str(browse9bro_dist$btbinary)


```


## For browse_9_dist

##### Data structure -> factor levels
```{r}

ggplot(data = browse_9_dist, aes(skogkategori)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse_9_dist, aes(kant)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse_9_dist, aes(treartgruppe)) +
  geom_bar()+
  theme_classic()


ggplot(data = browse_9_dist, aes(region)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse_9_dist, aes(KOMNR)) +
  geom_bar()+
  theme_classic()



```

```{r}
str(browse_9_dist$skogkategori)
str(browse_9_dist$kant)
str(browse_9_dist$treartgruppe)
str(browse_9_dist$region)

```

```{r}
browse_9_dist$skogkategori <- as.factor(browse_9_dist$skogkategori)
levels(browse_9_dist$skogkategori)
browse_9_dist$skogkategori <- factor(browse_9_dist$skogkategori, levels = c("Lavproduktiv_eldreskog", "Høyproduktiv_eldreskog", "Høyproduktiv_ungskog",  "Lavproduktiv_ungskog", "Uproduktiv_skog"))
levels(browse_9_dist$skogkategori)

browse_9_dist$kant <- as.factor(browse_9_dist$kant)
levels(browse_9_dist$kant)
browse_9_dist$kant <- factor(browse_9_dist$kant, levels = c("kant >20m", "kant <10m", "kant 10-20m", "mangler kant")) 
levels(browse_9_dist$kant)

browse_9_dist$treartgruppe <- as.factor(browse_9_dist$treartgruppe)
levels(browse_9_dist$treartgruppe)
browse_9_dist$treartgruppe <- factor(browse_9_dist$treartgruppe, levels = c("LAUV", "FURU", "ROS")) 
levels(browse_9_dist$treartgruppe)

browse_9_dist$region <- as.factor(browse_9_dist$region)
levels(browse_9_dist$region)

browse_9_dist$KOMNR <- as.factor(browse_9_dist$KOMNR)
levels(browse_9_dist$KOMNR)

```


```{r}
save(browse_9_dist, file = "browse_9_dist.rda")
```








# For browse9.2 (for brwosing pressure response)

##### Data structure -> factor levels

```{r}
load("processdata/browse9.1.rda")
load("processdata/browse9.2.rda")
```


```{r}

str(browse0.1)
head(browse0.1, n = 3)
names(browse0.1)

```

##### Subsetting on 9th and 10th cycle
```{r}
browse0.1_910 <- split(browse0.1, browse0.1$takst)

browse9.1 <- browse0.1_910[['9']]
# browse10.1 <- browse0.1_910[['10']]
summary(browse9.1)

save(browse9.1, file = "browse9.1.rda")
# save(browse_10, file = "browse_10.rda")


browse9.1 <- browse9.1[,c(1:5,7:9,15:24,34:36,40:45,58,62:67,74,76:79,88:90,99:105,112:115)]
browse9.2 <- browse9.1
browse9.2 <- subset(browse9.2, select = -c(9:34))
browse9.2 <- subset(browse9.2, select = -c(10:13))
# browse9.2$x <- NULL
summary(browse9.2)

```


##### Explore NAs 
```{r}

nrow(browse9.2)
nrow(na.omit(browse9.2))

head(browse_9, n = 10)
tail(browse_9, n = 10)
# unique(unlist(lapply(browse_9, function (x) which(is.na(x)))))
# fdata1[102, ]

sum(is.na(browse9.1$beitetrykk9))

browse9.2$distvei1[is.na(browse9.2$distvei1)] <- 10000
browse9.2$distvei2[is.na(browse9.2$distvei2)] <- 10000
browse9.2$distvei3[is.na(browse9.2$distvei3)] <- 10000
browse9.2$disthus[is.na(browse9.2$disthus)] <- 10000

browse9.2 <- na.omit(browse9.2)

save(browse9.2, file = "browse9.2.rda")
load("processdata/browse9.2.rda")


```


```{r}

# ggplot(data = browse9bro_dist, aes(landsdel)) +
#   geom_bar()+
#   theme_classic()

ggplot(data = browse9.2, aes(skogkategori)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9.2, aes(kant)) +
  geom_bar()+
  theme_classic()

ggplot(data = browse9.2, aes(treartgruppe9)) +
  geom_bar()+
  theme_classic()

# ggplot(data = browse9.2, aes(treartgruppe)) +
#   geom_bar()+
#   theme_classic()

# ggplot(data = browse9bro_dist, aes(hohkatb)) +
#   geom_bar()+
#   theme_classic()

ggplot(data = browse9.2, aes(region)) +
  geom_bar()+
  theme_classic()

# ggplot(data = browse9bro_dist, aes(vegetasjon)) +
#   geom_bar()+
#   theme_classic()

# ggplot(data = browse9bro_dist, aes(veitype1)) +
#   geom_bar()+
#   theme_classic()




```

```{r}

browse9.2$beitetrykkr <- as.integer(round(browse9.2$beitetrykk9))
browse9.2$bt100 <- browse9.2$beitetrykkr/100
```

```{r}
# browse9.2$landsdel <- as.factor(browse9.2$landsdel)
# browse9.2$hohkatb <- as.factor(browse9.2$hohkatb)
# browse9.2$landsdel <- factor(browse9.2$landsdel, levels = c("Sørlandet", "Østlandet-Øst", "Midt-Norge", "Nord-Norge", "Vestlandet", "Østlandet-vest"))
browse9.2$skogkategori <- factor(browse9.2$skogkategori, levels = c("Lavproduktiv_eldreskog", "Høyproduktiv_eldreskog", "Høyproduktiv_ungskog",  "Lavproduktiv_ungskog", "Uproduktiv_skog"))
browse9.2$kant <- factor(browse9.2$kant, levels = c("kant >20m", "kant <10m", "kant 10-20m", "mangler kant")) 
browse9.2$treartgruppe <- factor(browse9.2$treartgruppe9, levels = c("LAUV", "FURU", "ROS"))
# browse9.2$hohkatb <- factor(browse9.2$hohkatb, levels = c("100", "0", "200", "300", "400", "500", "600", "700", "800"))
browse9.2$region <- factor(browse9.2$region, levels = c("Hedmark", "Agder", "Buskerud", "Hordaland",  "More og Romsdal", "Nord-Trondelag", "Nordland", "Oppland", "Ostfold-Akershus", "Rogaland", "Sogn og Fjordane", "Sor-Trondelag", "Troms", "Vestfold-Telemark"))

```

```{r}
save(browse9.2, file = "browse9.2.rda")
load("processdata/browse9.2.rda")
```


##### Subset
```{r}

# subset on disthus and distvei2 > 3000
browse9.3 <- browse9.2[ which(browse9.2$disthus < 3000 & browse9.2$distvei2 < 3000),]
save(browse9.3, file = "browse9.3.rda")

browse_9$disthus_cut210 <- ifelse(browse_9$disthus >= 210, 210, browse_9$disthus)

browse_9_dist <- browse_9[browse_9$distvei1 > 200, ] # longest distance to any public road 1500m
head(browse_9_dist)
save(browse_9_dist, file = "browse_9_dist.rda")

browse_9_distbin <- browse_9[browse_9$disthus > 200, ] 
browse_9_distbeta <- browse_9[browse_9$disthus > 210, ] 
# head(browse_9_dist)
save(browse_9_distbin, file = "browse_9_distbin.rda")
save(browse_9_distbeta, file = "browse_9_distbeta.rda")

```

##### threshold cuts disthus
```{r}
browse9.3$disthus_cut1000 <- ifelse(browse9.3$disthus >= 1000, 1000, browse9.3$disthus)
browse9.3$disthus_cut950 <- ifelse(browse9.3$disthus >= 950, 950, browse9.3$disthus)
browse9.3$disthus_cut900 <- ifelse(browse9.3$disthus >= 900, 900, browse9.3$disthus)
browse9.3$disthus_cut850 <- ifelse(browse9.3$disthus >= 850, 850, browse9.3$disthus)
browse9.3$disthus_cut800 <- ifelse(browse9.3$disthus >= 800, 800, browse9.3$disthus)
browse9.3$disthus_cut750 <- ifelse(browse9.3$disthus >= 750, 750, browse9.3$disthus)
browse9.3$disthus_cut700 <- ifelse(browse9.3$disthus >= 700, 700, browse9.3$disthus)
browse9.3$disthus_cut650 <- ifelse(browse9.3$disthus >= 650, 650, browse9.3$disthus)


# 210 is the thing! (the threshold)

save(browse9.3, file = "browse9.3.rda")


```



##### Scale variables
```{r}

browse9.3$HOH_scale = scale(browse9.3$HOH)
browse9.3$tretetthet9_scale = scale(browse9.3$tretetthet9)
browse9.3$helling_scale = scale(browse9.3$helling)
browse9.3$disthus_scale = scale(browse9.3$disthus)
browse9.3$distvei2_scale = scale(browse9.3$distvei2)
browse9.3$ac_scale = scale(browse9.3$ac)
browse9.3$disthus_cut1000_scale = scale(browse9.3$disthus_cut1000)
browse9.3$disthus_cut950_scale = scale(browse9.3$disthus_cut950)
browse9.3$disthus_cut900_scale = scale(browse9.3$disthus_cut900)
browse9.3$disthus_cut850_scale = scale(browse9.3$disthus_cut850)
browse9.3$disthus_cut800_scale = scale(browse9.3$disthus_cut800)
browse9.3$disthus_cut750_scale = scale(browse9.3$disthus_cut750)
browse9.3$disthus_cut700_scale = scale(browse9.3$disthus_cut700)
browse9.3$disthus_cut650_scale = scale(browse9.3$disthus_cut650)

save(browse9.3, file = "browse9.3.rda")
```

